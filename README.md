# Проект YaMDb

## Авторы проекта:
- Станислав Казаринов
- Валерий Шанкоренко
- Ольга Чернецкая

## Описание проекта:
Проект представляет собой API для YaMDb.
Проект YaMDb собирает отзывы (Review) пользователей на произведения (Title). Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку. Произведения делятся на категории (Category) из списка предустановленных.
Произведению может быть присвоен жанр (Genre) из списка предустановленных. Добавлять произведения, категории и жанры может только администратор.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (Rating) (целое число). На одно произведение пользователь может оставить только один отзыв.
Пользователи могут оставлять комментарии к отзывам (Comment).
Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

## Стек технологий

- Python
- Django
- Django REST Framework
- SQLite

## Ресурсы API YaMDb

AUTH - аутентификация пользователя.

USERS - пользователи.

TITLES - описание произведений, к которым пишут отзывы.

CATEGORIES - категории произведений.

GENRES - жанры произведений.

REVIEWS - отзывы на произведения. Отзыв привязан к определённому произведению.

COMMENTS - комментарии к отзывам. Комментарий привязан к определённому отзыву.

## Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```shell
git clone <путь к репозиторию>
```

```
cd <директория куда клонирован репозиторий>
```

Cоздать и активировать виртуальное окружение:

```shell
python -m venv venv
```

```shell
source venv/Scripts/activate
```

Установить зависимости из файла requirements.txt:

```shell
python -m pip install --upgrade pip
```

```shell
pip install -r requirements.txt
```

Выполнить миграции:

```shell
python manage.py migrate
```

Импортировать данные из CSV-файла в базу данных:

```shell
python manage.py import_csv
```

## Как создать пользователя для админки

Для создания пользователя для административной панели Django,
выполните следующую команду в терминале:

```shell
python manage.py createsuperuser
```

Следуйте инструкциям в терминале для ввода имени пользователя, адреса электронной почты и пароля.

После создания пользователя Вы сможете войти в административную панель по адресу [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/).

## Запустить проект:

```shell
python manage.py runserver
```
## Где найти документацию к API

После запуска проекта по адресу [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc) 
будет доступна документация по API для проекта **YaMDb**. В документации описаны примеры запросов и ответов API. Документация представлена в формате **Redoc.**

## Регистрация нового пользователя
Получить код подтверждения на переданный email. 

Пользователь отправляет POST-запрос с параметром email на http://127.0.0.1:8000/api/v1/auth/signup/. YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
Пользователь отправляет POST-запрос с параметрами email и confirmation_code на http://127.0.0.1:8000/api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен). Дальше, передав токен можно будет обращаться с API, отправляя этот токен с каждым запросом.

## Примеры запросов к API

#### Получение публикаций

```http
GET api/v1/categories/
```

#### Создание новой категории

```http
POST api/v1/categories/
Content type
application/json

{
"name": "string",
"slug": "string"
}
```

#### Создание нового произведения

```http
POST api/v1/titles/
Content type
application/json

{
"name": "string",
"year": 0,
"description": "string",
"genre": [
"string"
],
"category": "string"
}
```

#### Создание нового отзыва

```http
POST api/v1/titles/{title_id}/reviews/
Content type
application/json

{
"text": "string",
"score": 1
}
```

#### Удаление отзыва

```http
DELETE api/v1/titles/{title_id}/reviews/{review_id}/
```